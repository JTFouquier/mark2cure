extends training/exp-2-intro-4/step-base-multi

block step-instructions
  h2 To change the color of a marking, first mark the word or span of words that fit a concept. Then, click on the mark you just made to change itâ€™s color.
  h2 <span class="user_annotated_green"><strong>Green</strong></span> will refer to the Genes Concept
  p In the box below, use your Gene Marking Skill to highlight gene concept terms in green

block progress-bar
  div(role='progressbar', aria-valuenow='20', aria-valuemin='0', aria-valuemax='100', style='width: 20%;').progress-bar.progress-bar-striped.active

block next-link
  a(href='{% url "training:four" step_num=3 %}', id='next', disabled).btn.btn-default.pull-right Next

block answers
  script.
    console.log('asdfasdf');
    var self_data;
    YPet.addInitializer(function(options) {
      console.log('2222 asdfasdf');
      /* data fetches the original document and annotations */
      $.getJSON('/static/bioc/training/exp-2-intro-4/step-2.json', function( data ) {
        console.log('333 asdfasdf');
        self_data = data;
        console.log('data', data);
        var passages = data.collection.document.passage;
        var regions = {};
        _.each(passages, function(passage, passage_idx) {
          $('#paragraphs').append('<div id="'+ passage.infon[2]['#text'] +'" class="paragraph-box"><p class="paragraph"></p></div></div>');
          regions[passage_idx] = '#'+passage.infon[2]['#text'];
        });
        YPet.addRegions(regions);

        _.each(passages, function(passage, passage_idx) {
          var p = new Paragraph({'text': passage.text});
          YPet[passage_idx].show( new WordCollectionView({
            collection: p.get('words'),
            passage_json: passage,
            bioc_json: data
          }) );
        });
      });
    });
    YPet.start();

    /*
    $(window).resize(function() {
      $('.underline').remove();
      $('.underline-space').remove();

      if(self_data) {
        _.each(self_data.collection.document.passage, function(passage, passage_idx) {
          YPet[passage_idx].currentView.drawBioC(passage, false);
        });
      }

      if(partner_data) {
        _.each(partner_data.collection.document.passage, function(passage, passage_idx) {
          YPet[passage_idx].currentView.drawBioC(passage, true);
        });
      }
    });
    */

    var help = [
      {text: 'depression', msg: 'Mark only treatment concepts in this tutorial. Do NOT mark disease or gene concepts'},
      {text: 'fluoxetine', msg: 'Mark the full name of the drug or treatment as specifically as possible'},
      {text: 'hydrochloride', msg: 'Mark the full name of the drug or treatment as specifically as possible'},
      {text: 'Prozac and Sarafem', msg: 'Mark different drug names separately even if they are the same drug'},
    ];
    var answers = [{text: "Lilly 110140", start: 0}, {text: "fluoxetine hydrochloride", start: 68}, {text: "Prozac", start: 150}, {text: "Sarafem", start: 161}];
