extends training/relation/part-1/base

block intro-content
  .row.m-t-md
    .col-xs-12
      p The text in which the two concepts were found together will be included. The concepts are highlighted in the text so you can easily find their relationship
      p
        strong Select the relationship (or lack thereof) by clicking on the appropriate box
      p
        strong Click on the currently selected relationship to return to the previous menu

      p
        strong The 'submit' button will not be active until a relationship is selected


  .row.m-t-md
    .col-xs-12.text-center
      a(id='next-button', href='{% url "training:relation-training" part_num=1 step_num=6 %}').btn.btn-primary Next


block navigation


block interactive

  #tree-insert

  p The immune system in <span class='user_annotated'>Duchenne muscular dystrophy</span>: Friend or foe
  p <span class='user_annotated'>Duchenne muscular dystrophy</span> (DMD) is a genetic disease caused by mutations in the X-linked <span class='user_annotated_green'>dystrophin</span> gene, resulting in reduced or absent protein production, subsequently leading to the structural instability of the dystroglycan complex (DGC), muscle degeneration, and early death in males. Thus, current treatments have been targeting the genetic defect either by bypassing the mutation through exon skipping or replacing the defective gene through gene therapy and stem cell approaches. However, what has been an underappreciated mediator of muscle pathology and, ultimately, of muscle degeneration and fibrotic replacement, is the prominent inflammatory response. Of potentially critical importance, however, is the fact that the elements mediating the inflammatory response also play an essential role in tissue repair.


  script.
    relation_task_settings = {};
    relation_task_settings['data'] = {{ relation_data|safe }};

    task_data = [{
      "id": 0,
      "document": 0,
      "relation_type": "c_d",
      "concepts": {
        "c2": {
          "text": "Duchenne muscular dystrophy",
          "type": "d",
          "id": "0"
        },
        "c1": {
          "text": "Ibuprofen",
          "type": "c",
          "id": "0"
        }
      },
      "user_completed": false
    }];


block post-footer
  <script type="html/template" id="tree-template">
  <div id="tree" class="row text-center">

  <div class="concept col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-0 col-md-3" id="c1">
  <i id="c1_not_correct" class="fa fa-times-circle"></i>
  <h3><%= c1.text %></h3>
  <p class="not_correct_stype"></p>
  </div>

  <div class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-0 col-md-6" style="padding-bottom:10px; padding-top:10px;">
  <h3 id="relation" class="disabled">Select a Relationship below...</h3>
  <ul class="list-group"></ul>
  </div>

  <div class="concept col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-0 col-md-3" id="c2">
  <i id="c2_not_correct" class="fa fa-times-circle"></i>
  <h3><%= c2.text %></h3>
  <p class="not_correct_stype"></p>
  </div>

  </script>



  script(src="/static/js/libs/tree.js")
  script(src="/static/js/tasks/relation-training.js")

  script.

    /* (TODO) work for incorrects
    * When an item is selected */
    Tree['convoChannel'].on('click', function(obj) {
      console.log('asdf');
      var current_selection = Tree.start.currentView.options.choice;
      if(current_selection.get('id') == 'RdKIrcaEOnM4DRk25g5jAfeNC6HSpsFZaiIPqZer') {
        $('#next-button').show();
      };
    });

