extends base

- load widget_tweaks
- load humanize


block header
  - with headerMessage=task.name
    include includes/header-relation


block content

  .container-fluid
    #quest-guide.row
      .col-xs-12.col-xs-offset-1.col-md-12.col-md-offset-1.col-lg-12.col-lg-offset-1
        p#progress-bar

    .row
      .col-xs-12.col-md-10.col-md-offset-1
        #tree-insert

    .row
      form(role='form', action="{% url 'task-relation:results' relation.pk %}", method="POST")
        - csrf_token
        input#relation_type(type="hidden", name="relation_type", value=selected_relation)
        input#username(type="hidden", name="username", value=request.user)
        input#relation(type="hidden", name="relation", value=relation.pk)


        .row
          .col-xs-10.col-xs-offset-1.col-sm-7.col-sm-offset-0.col-md-4.col-md-offset-4
            button.btn.btn-primary.btn-block#submit-button Submit

    .row
      .col-xs-12.col-md-10.col-md-offset-1
        div(id="doc_{{document.pk}}", data-doc_pk="{{document.pk}}", data-pmid="{{document.document_id}}").document
          .paragraphs
            - for section in sections
              .paragraph-box.m-t-md
                p.section.paragraph #{section.text}

    .row.m-t-md
      .col-sm-5.col-md-3.col-md-offset-1.hidden-xs-down
        div(role="group").btn-group-vertical
          a(data-toggle="modal", data-target="#relationshipInstructionsModal", style='background-color: #d1f3ff;').btn.btn-default
            | Relation Instructions  <i class="fa fa-external-link fa-lg"></i>

          a(data-toggle="modal", data-target="#conceptDefinitionsModal", style='background-color: #d1f3ff;').btn.btn-default
            | Concept Definitions  <i class="fa fa-external-link fa-lg"></i>


block post-footer

  <script type="html/template" id="tree-template">
  <div id="tree" class="row text-center">

  <div class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-0 col-md-3" id="c1">
  <div id="c1_remove_icon"><p></p></div>
  <div><h3><%= c1.text %></h3></div>
  <div id="c1_not_correct"><h2></h2></div>
  </div>

  <div class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-0 col-md-6">
  <h3 id="relation" class="disabled">Select a Relationship below...</h3>
  <ul class="list-group"></ul>
  </div>

  <div class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-0 col-md-3" id="c2">
  <div id="c2_remove_icon"><p></p></div>
  <div><h3><%= c2.text %></h3></div>
  <div id="c2_not_correct"><h2></h2></div>
  </div>

  </script>

  script.
    var csrf_token = "{{csrf_token}}";
    var relation_pk = "{{ relation.pk }}";
    var document_pk = "{{ document_pk }}";
    var username = "{{ request.user }}";
    console.log(document_pk);
  script(src="/static/js/libs/tree.js")
  script(src="/static/js/tasks/relation.js")
